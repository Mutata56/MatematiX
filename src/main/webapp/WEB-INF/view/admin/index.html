<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Администрирование</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/resources/static/css/base/base.css}">
    <link rel="stylesheet" th:href="@{/resources/static/css/admin/base.css}">
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

    <main>
        <nav>
            <a href="">Пользователи</a>
            <a href="">Статьи</a>
            <a href="">Роли</a>
            <a href="">Токены</a>
            <a href="">Рейтинг</a>
            <a th:href="@{/}"><img class="frame-logo" th:src="@{/resources/static/img/logo_white.svg}" alt="MatematiX"></a>
        </nav>
        <div class="main">
            <div class="upper-div">
                <div>
                        <input th:classappend="${itemsPerPage > 15 ? 'fix-search' : ''}" type="text" style="width:600px" id="search-input">
                        <input th:classappend="${itemsPerPage > 15 ? 'fix-find' : ''}" type="image" th:src="@{/resources/static/img/find.svg}" id="search">
                </div>
                <div style="display: flex">
                    <p style="margin-right: 40px;margin-left: -160px; font-weight: 600;margin-top: 3px;">Искать по</p>
                    <select th:name="findBy" th:id="findBy" style="padding-left: 5px;padding-right: 5px">
                        <option th:selected="${findBy eq 'name'}" th:value="name">Имя</option>
                        <option th:selected="${findBy eq 'email'}" th:value="email">E-Mail</option>
                        <option th:selected="${findBy eq 'blocked'}" th:value="blocked">Заблокирован</option>
                        <option th:selected="${findBy eq 'activated'}" th:value="activated">Активирован</option>
                        <option th:selected="${findBy eq 'role'}" th:value="role">Роль</option>
                    </select>
                </div>
                <input type="submit" value="Добавить">
            </div>
            <div>
                <table>
                    <thead>
                        <tr>
                            <td class="td-name">Имя</td>
                            <td class="td-email">E-Mail</td>
                            <td class="td-blocked">Заблокирован</td>
                            <td>Активирован</td>
                            <td class="td-role">Роль</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="user : ${objects} ">
                            <td th:text="${user.getName()}"></td>
                            <td th:text="${user.getEmail()}"></td>
                            <td th:if="${user.getBlocked() == 0}"><a class="blockClass" th:href="@{/admin/block/{name}(name=${user.getName()})}">Заблокировать</a></td>
                            <td th:if="${user.getBlocked() == 1}"><a class="unblockClass" th:href="@{/admin/unblock/{name}(name=${user.getName()})}">Разблокировать</a></td>
                            <td th:if="${user.getEnabled() == 1}"><a class="deactivateClass" th:href="@{/admin/deactivate/{name}(name=${user.getName()})}">Да</a></td>
                            <td th:if="${user.getEnabled() == 0}"><a class="activateClass" th:href="@{/admin/activate/{name}(name=${user.getName()})}">Нет</a></td>
                            <td th:if="${user.getRole() == 'ROLE_USER'}">Пользователь</td>
                            <td th:if="${user.getRole() == 'ROLE_ADMIN'}">Администратор</td>
                        </tr>
                    </tbody>
                </table>

            </div>
            <div class="bottom">
                <div class="sort-settings">
                    <p style="margin-right: 40px;margin-left: -160px; font-weight: 600;margin-top: 3px;">Сортировать по</p>
                    <select th:id="sortBy" th:name="sortBy" style="padding-left: 5px;padding-right: 5px">
                        <option th:selected="${sortBy eq 'noSort'}" th:value="noSort">-</option>
                        <option th:selected="${sortBy eq 'name'}" th:value="name">Имя</option>
                        <option th:selected="${sortBy eq 'email'}" th:value="email">E-Mail</option>
                        <option th:selected="${sortBy eq 'blocked'}" th:value="blocked">Заблокирован</option>
                        <option th:selected="${sortBy eq 'enabled'}" th:value="enabled">Активирован</option>
                        <option th:selected="${sortBy eq 'role'}" th:value="role">Роль</option>
                    </select>
                    <img th:id="sortArrowsAsc" th:if="${sortDirection eq 'asc' or sortDirection eq null}" style="width: 20px;height: 20px" th:src="@{/resources/static/img/sortArrowsAsc.svg}" alt="">
                    <img th:id="sortArrowsDesc" th:if="${sortDirection eq 'desc'}" style="width: 20px;height: 20px"  th:src="@{/resources/static/img/sortArrowsDesc.svg}" alt="">
                </div>
                <div class="bottom-nav" th:value="${currentPage}">

                    <div th:if="${currentPage eq 1}" class="decorated-div" th:id="currentPage1st" th:content="1">1</div>
                    <div th:if="${currentPage eq 1 and total > 1}" class="decorated-div" th:id="currentPage2nd" th:content="2">2</div>
                    <div th:if="${currentPage eq 1 and total > 2}" class="decorated-div" th:id="currentPage3rd" th:content="3">3</div>


                    <div th:if="${currentPage > 1}" class="decorated-div" th:id="currentPage1st" th:text="${currentPage - 1}" th:content="${currentPage - 1}">1</div>
                    <div th:if="${total > 1 and currentPage > 1}" class="decorated-div" th:text="${currentPage}" th:id="currentPage2nd" th:content="${currentPage}">2</div>
                    <div th:if="${total > 2 and currentPage > 1 and currentPage < total}" class="decorated-div" th:id="currentPage3rd" th:text="${currentPage + 1}" th:content="${currentPage + 1}">3</div>

                    <div th:if="${total > 3 and currentPage < total - 1}" class="decorated-div">...</div>
                    <div th:if="${total > 3 and currentPage < total - 1}" th:text="${total}" class="decorated-div" id="currentPageLast" th:content="${total}"></div>
                </div>
                <div class="pagination-settings" th:value="${itemsPerPage}">
                    <div class="decorated-div" id="pagination15">15</div>
                    <div class="decorated-div" id="pagination50">50</div>
                    <div class="decorated-div" id="pagination100">100</div>
                </div>
            </div>
        </div>
    </main>

    <script th:src="@{/resources/static/js/pagination.js}" ></script>
</body>
</html>